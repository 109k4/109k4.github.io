(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chats"],{1276:function(t,e,n){"use strict";var r=n("d784"),i=n("44e7"),c=n("825a"),a=n("1d80"),s=n("4840"),u=n("8aa5"),o=n("50c4"),l=n("14c3"),h=n("9263"),d=n("d039"),f=[].push,g=Math.min,p=4294967295,v=!d((function(){return!RegExp(p,"y")}));r("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(a(this)),c=void 0===n?p:n>>>0;if(0===c)return[];if(void 0===t)return[r];if(!i(t))return e.call(r,t,c);var s,u,o,l=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,v=new RegExp(t.source,d+"g");while(s=h.call(v,r)){if(u=v.lastIndex,u>g&&(l.push(r.slice(g,s.index)),s.length>1&&s.index<r.length&&f.apply(l,s.slice(1)),o=s[0].length,g=u,l.length>=c))break;v.lastIndex===s.index&&v.lastIndex++}return g===r.length?!o&&v.test("")||l.push(""):l.push(r.slice(g)),l.length>c?l.slice(0,c):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=a(this),c=void 0==e?void 0:e[t];return void 0!==c?c.call(e,i,n):r.call(String(i),e,n)},function(t,i){var a=n(r,t,this,i,r!==e);if(a.done)return a.value;var h=c(t),d=String(this),f=s(h,RegExp),b=h.unicode,x=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(v?"y":"g"),O=new f(v?h:"^(?:"+h.source+")",x),m=void 0===i?p:i>>>0;if(0===m)return[];if(0===d.length)return null===l(O,d)?[d]:[];var j=0,E=0,y=[];while(E<d.length){O.lastIndex=v?E:0;var _,I=l(O,v?d:d.slice(E));if(null===I||(_=g(o(O.lastIndex+(v?0:E)),d.length))===j)E=u(d,E,b);else{if(y.push(d.slice(j,E)),y.length===m)return y;for(var R=1;R<=I.length-1;R++)if(y.push(I[R]),y.length===m)return y;E=j=_}}return y.push(d.slice(j)),y}]}),!v)},"14c3":function(t,e,n){var r=n("c6b6"),i=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var c=n.call(t,e);if("object"!==typeof c)throw TypeError("RegExp exec method returned something other than an Object or null");return c}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"44e7":function(t,e,n){var r=n("861d"),i=n("c6b6"),c=n("b622"),a=c("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==i(t))}},6547:function(t,e,n){var r=n("a691"),i=n("1d80"),c=function(t){return function(e,n){var c,a,s=String(i(e)),u=r(n),o=s.length;return u<0||u>=o?t?"":void 0:(c=s.charCodeAt(u),c<55296||c>56319||u+1===o||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):c:t?s.slice(u,u+2):a-56320+(c-55296<<10)+65536)}};t.exports={codeAt:c(!1),charAt:c(!0)}},"8aa5":function(t,e,n){"use strict";var r=n("6547").charAt;t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},9263:function(t,e,n){"use strict";var r=n("ad6d"),i=n("9f7f"),c=RegExp.prototype.exec,a=String.prototype.replace,s=c,u=function(){var t=/a/,e=/b*/g;return c.call(t,"a"),c.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),o=i.UNSUPPORTED_Y||i.BROKEN_CARET,l=void 0!==/()??/.exec("")[1],h=u||l||o;h&&(s=function(t){var e,n,i,s,h=this,d=o&&h.sticky,f=r.call(h),g=h.source,p=0,v=t;return d&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),v=String(t).slice(h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==t[h.lastIndex-1])&&(g="(?: "+g+")",v=" "+v,p++),n=new RegExp("^(?:"+g+")",f)),l&&(n=new RegExp("^"+g+"$(?!\\s)",f)),u&&(e=h.lastIndex),i=c.call(d?n:h,v),d?i?(i.input=i.input.slice(p),i[0]=i[0].slice(p),i.index=h.lastIndex,h.lastIndex+=i[0].length):h.lastIndex=0:u&&i&&(h.lastIndex=h.global?i.index+i[0].length:e),l&&i&&i.length>1&&a.call(i[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i}),t.exports=s},"9d68":function(t,e,n){"use strict";n("baac")},"9f7f":function(t,e,n){"use strict";var r=n("d039");function i(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=i("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=i("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},ac1f:function(t,e,n){"use strict";var r=n("23e7"),i=n("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},ad6d:function(t,e,n){"use strict";var r=n("825a");t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},baac:function(t,e,n){},c98b:function(t,e,n){"use strict";n.r(e);n("7db0"),n("b0c0"),n("ac1f"),n("1276");var r=n("7a23"),i=Object(r["I"])("data-v-69a11360");Object(r["t"])("data-v-69a11360");var c={class:"container"},a={key:0,class:"chats mainList"},s={class:"userIcon"},u={class:"chats__text"},o={class:"chats__username"},l={key:0,class:"chats__messageText"},h={class:"chats__time"},d={key:1,class:"chats__noChats"};Object(r["r"])();var f=i((function(t,e,n,i,f,g){var p=Object(r["x"])("router-link"),v=Object(r["x"])("MessageNotification");return Object(r["q"])(),Object(r["d"])("div",c,[t.chats.length?(Object(r["q"])(),Object(r["d"])("div",a,[(Object(r["q"])(!0),Object(r["d"])(r["a"],null,Object(r["w"])(t.chats,(function(e){return Object(r["q"])(),Object(r["d"])("div",{key:e.name,class:["chats__item mainList__elem",{"chats__item--active":g.getNotificationsLength(e)}]},[Object(r["g"])(p,{to:{path:"/"+e.users.find((function(e){return e!=t.authorizedUser}))+"/chat"}},null,8,["to"]),Object(r["g"])("div",s,[Object(r["g"])("img",{src:f.BACKEND_DOMAIN+g.userObj(e).photo},null,8,["src"])]),Object(r["g"])("div",u,[Object(r["g"])("div",o,Object(r["z"])(g.userObj(e).name),1),e.messages.length?(Object(r["q"])(),Object(r["d"])("div",l,Object(r["z"])(g.getLastMessage(e)),1)):Object(r["e"])("",!0)]),Object(r["g"])("div",h,Object(r["z"])(g.getLastTime(e).split(",")[3]),1),Object(r["g"])(v,{notificationCount:g.getNotificationsLength(e),color:"grey",class:"chats__newMessagesCount"},null,8,["notificationCount"])],2)})),128))])):(Object(r["q"])(),Object(r["d"])("div",d,"No chats found"))])})),g=(n("4de4"),n("5530")),p=n("5502"),v=n("8575"),b=n("b779"),x={name:"Chats",data:function(){return{BACKEND_DOMAIN:v["a"]}},components:{MessageNotification:b["a"]},computed:Object(g["a"])(Object(g["a"])({},Object(p["d"])(["contacts","chats","authorizedUser"])),{},{authorizedUserObj:function(){return this.$parent.$parent.getAuthObj()}}),watch:{authorizedUser:function(t){t||this.$router.push("/")},chats:function(){this.sortChatsByActivity()}},methods:{userObj:function(t){var e=this,n=t.users.find((function(t){return t!=e.authorizedUser})),r=this.contacts.find((function(t){return t.name==n}));return r},sortChatsByActivity:function(){var t=this;this.chats.sort((function(e,n){var r=t.getLastTime(e),i=t.getLastTime(n),c=new Date(r),a=new Date(i);return c>a?-1:c==a?0:c<a?1:void 0}))},getLastTime:function(t){if(t.messages.length){var e=t.messages[t.messages.length-1].timeOfSend;return e}var n=t.timeOfCreate;return n},getLastMessage:function(t){var e=t.messages[t.messages.length-1].text;return e.length>30&&(e=e.substr(0,30)+" . . ."),e},getNotificationsLength:function(t){var e=this;if(this.authorizedUserObj){var n=this.authorizedUserObj.notifications.filter((function(n){return n.messageFrom==t.users.find((function(t){return t!=e.authorizedUser}))})).length;return n}return!1}},mounted:function(){this.authorizedUser?this.sortChatsByActivity():this.$router.push("/404")}};n("9d68");x.render=f,x.__scopeId="data-v-69a11360";e["default"]=x},d784:function(t,e,n){"use strict";n("ac1f");var r=n("6eeb"),i=n("d039"),c=n("b622"),a=n("9263"),s=n("9112"),u=c("species"),o=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),l=function(){return"$0"==="a".replace(/./,"$0")}(),h=c("replace"),d=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),f=!i((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,h){var g=c(t),p=!i((function(){var e={};return e[g]=function(){return 7},7!=""[t](e)})),v=p&&!i((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[u]=function(){return n},n.flags="",n[g]=/./[g]),n.exec=function(){return e=!0,null},n[g](""),!e}));if(!p||!v||"replace"===t&&(!o||!l||d)||"split"===t&&!f){var b=/./[g],x=n(g,""[t],(function(t,e,n,r,i){return e.exec===a?p&&!i?{done:!0,value:b.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:l,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:d}),O=x[0],m=x[1];r(String.prototype,t,O),r(RegExp.prototype,g,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}h&&s(RegExp.prototype[g],"sham",!0)}}}]);
//# sourceMappingURL=chats.0e4c975e.js.map