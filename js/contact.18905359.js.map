{"version":3,"sources":["webpack:///./src/views/ContactView.vue?c8e2","webpack:///./src/views/ContactView.vue","webpack:///./src/views/ContactView.vue?2a4b"],"names":["class","curentUser","$route","params","contactName","status","src","BACKEND_DOMAIN","photo","authorizedUser","checkChat","name","data","computed","routePathName","this","contacts","find","contact","methods","arrDifference","arr1","arr2","arrDiff","forEach","item1","validator","item2","push","isChatExist","user","arrWeNeed","result","chats","chat","users","length","redirectToChat","chatName","$router","createChat","firsUser","secondUser","timeOfCreated","format","newChat","String","SET_NEW_CHAT","v","then","respons","mounted","render","__scopeId"],"mappings":"2GAAA,W,+JCCUA,MAAM,a,SACoBA,MAAM,gB,GACrBA,MAAM,sB,GACNA,MAAM,+B,GAGNA,MAAM,wB,SACoBA,MAAM,4B,wEAPhD,eAYK,MAZL,EAYK,CAXc,EAAAC,Y,iBAAX,eAUK,MAVL,EAUK,CATF,eAAkJ,MAAlJ,EAAkJ,C,8BAA/G,EAAAC,OAAOC,OAAOC,aAAc,IAAC,kBAA2E,QAArEJ,MAAK,CAAC,SAAQ,kBAA4B,EAAAC,WAAWI,U,UAC3H,eAEM,MAFN,EAEM,CADF,eAA4C,OAAtCC,IAAK,EAAAC,eAAe,EAAAN,WAAWO,O,kBAEzC,eAIM,MAJN,EAIM,CAHS,EAAAC,gB,iBAAX,eAEM,MAFN,EAEM,CADF,eAAyG,QAAnGT,MAAM,8BAA+B,QAAK,+BAAE,EAAAU,UAAU,EAAAR,OAAOC,OAAOC,gBAAc,iB,qKAa7F,GACXO,KAAM,cACNC,KAFW,WAGP,MAAM,CACFL,eAAgB,SAGxBM,SAAQ,iCACD,eAAS,CACR,WACA,QACA,oBAJA,IAMJZ,WAAY,WACR,IAAIa,EAAgBC,KAAKb,OAAOC,OAAOC,YACvC,OAAOW,KAAKC,SAASC,MAAK,SAAAC,GAAM,OAAKA,EAAQP,MAAQG,QAG7DK,QAAO,iCACA,eAAW,CACV,cACA,eACA,qBAJD,IAMHC,cANG,SAMWC,EAAMC,GAChB,IAAIC,EAAU,GAgBd,OAdAF,EAAKG,SAAQ,SAACC,GACV,IAAIC,GAAY,EAEhBJ,EAAKE,SAAQ,SAACG,GACXF,GAASE,IACAD,GAAY,MAIpBA,GACAH,EAAQK,KAAKH,MAIdF,GAEXM,YAzBG,SAyBSC,GAAK,WACTC,EAAY,CAACD,EAAMf,KAAKN,gBACxBuB,GAAS,EAQb,OANAjB,KAAKkB,MAAMT,SAAQ,SAAAU,GACwC,GAApD,EAAKd,cAAcc,EAAKC,MAAOJ,GAAWK,SACzCJ,GAAS,MAIVA,GAGXK,eAtCG,SAsCYC,GACXvB,KAAKwB,QAAQX,KAAK,IAAIU,EAAS,UAGnCE,WA1CG,WA2CC,IAAIC,EAAW1B,KAAKd,WAAWU,KAC3B+B,EAAa3B,KAAKN,eAElBkC,EAAgB,MAASC,OAAO,uBAE9BC,EAAU,CACZ,WAAcJ,EACd,YAAeC,EACf,eAAkBI,OAAOH,IAG7B,OAAO5B,KAAKgC,aAAaF,IAE7BnC,UAxDG,SAwDO4B,GACN,IAAIU,EAAIjC,KACJiC,EAAEnB,YAAYS,GAMdU,EAAEX,eAAeC,GALjBU,EAAER,aACDS,MAAK,SAACC,GACHF,EAAEX,eAAeC,SAOjCa,QAtFW,WAuFJpC,KAAKd,YACLc,KAAKwB,QAAQX,KAAK,U,UCzGjC,EAAOwB,OAAS,EAChB,EAAOC,UAAY,kBAEJ","file":"js/contact.18905359.js","sourcesContent":["export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ContactView.vue?vue&type=style&index=0&id=373a4f1d&lang=scss&scoped=true\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ContactView.vue?vue&type=style&index=0&id=373a4f1d&lang=scss&scoped=true\"","<template>\r\n     <div class=\"container\">\r\n             <div v-if=\"curentUser\" class=\"contact-card\">\r\n                <div class=\"contact-card__name\">{{ $route.params.contactName }} <span class=\"status\" :class=\"{'status--active': curentUser.status}\"></span> </div>\r\n                <div class=\"contact-card__image mainImg\">\r\n                    <img :src=\"BACKEND_DOMAIN+curentUser.photo\">\r\n                </div>\r\n                <div class=\"contact-card__bottom\">\r\n                    <div v-if=\"authorizedUser\" class=\"contact-card__start-chat\">\r\n                        <span class=\"mainButton mainButton--blue\" @click=\"checkChat($route.params.contactName)\">Start chat</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import moment from 'moment'\r\n    import Axios from 'axios'\r\n    import {mapState, mapActions} from 'vuex'\r\n    import BACKEND_DOMAIN from '../messanger-config';\r\n\r\n    export default {\r\n        name: \"contactView\",\r\n        data(){\r\n            return{\r\n                BACKEND_DOMAIN: BACKEND_DOMAIN\r\n            }\r\n        },\r\n        computed:{\r\n            ...mapState([\r\n                'contacts',\r\n                'chats',\r\n                'authorizedUser'\r\n            ]),\r\n            curentUser: function(){\r\n                let routePathName = this.$route.params.contactName\r\n                return this.contacts.find(contact => contact.name == routePathName)\r\n            } \r\n        },\r\n        methods:{\r\n            ...mapActions([\r\n                'GET_CONTACT',\r\n                'SET_NEW_CHAT',\r\n                'CHECK_AUTORIZED'\r\n            ]),\r\n            arrDifference(arr1, arr2){\r\n                let arrDiff = []\r\n    \r\n                arr1.forEach((item1)=>{\r\n                    let validator = false\r\n                    \r\n                    arr2.forEach((item2)=>{\r\n                    if(item1 == item2){\r\n                                validator = true\r\n                    }\r\n                        })\r\n                    \r\n                    if(!validator){\r\n                        arrDiff.push(item1)\r\n                    }\r\n                })\r\n                \r\n                return arrDiff\r\n            },\r\n            isChatExist(user){\r\n                let arrWeNeed = [user, this.authorizedUser]\r\n                let result = false\r\n\r\n                this.chats.forEach(chat => {\r\n                    if(this.arrDifference(chat.users, arrWeNeed).length == 0){\r\n                        result = true\r\n                    }\r\n                });\r\n\r\n                return result\r\n            },\r\n            // redirect to chat\r\n            redirectToChat(chatName){\r\n                this.$router.push('/'+chatName+'/chat')\r\n            },\r\n            // create chate\r\n            createChat(){\r\n                let firsUser = this.curentUser.name\r\n                let secondUser = this.authorizedUser\r\n\r\n                let timeOfCreated = moment().format('dddd, LL, h:mm:ss a'); \r\n\r\n                const newChat = {\r\n                    \"first_user\": firsUser,\r\n                    \"second_user\": secondUser,\r\n                    \"create_dateStr\": String(timeOfCreated)\r\n                }\r\n\r\n                return this.SET_NEW_CHAT(newChat)                \r\n            },\r\n            checkChat(chatName){\r\n                let v = this \r\n                if(!v.isChatExist(chatName)){\r\n                    v.createChat()\r\n                    .then((respons)=>{\r\n                        v.redirectToChat(chatName)\r\n                    })\r\n                }else{\r\n                    v.redirectToChat(chatName)\r\n                }\r\n            }\r\n        },\r\n        mounted(){\r\n           if(!this.curentUser){\r\n               this.$router.push('/404')\r\n           } \r\n        }\r\n    }\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n    .contact-card {\r\n        display: flex;\r\n        flex-flow: column;\r\n        align-items: center;\r\n\r\n        &__name {\r\n            margin: 30px 0 30px 0;\r\n            font-size: 35px;\r\n\r\n            display: flex;\r\n            align-items: center;\r\n\r\n            span{\r\n                margin-left: 10px;\r\n            }\r\n        }\r\n\r\n        &__bottom {\r\n            display: flex;\r\n            justify-content: flex-end;\r\n\r\n            margin: 30px 0 50px 0;\r\n        }\r\n    }\r\n</style>","import { render } from \"./ContactView.vue?vue&type=template&id=373a4f1d&scoped=true&bindings={\\\"BACKEND_DOMAIN\\\":\\\"data\\\",\\\"curentUser\\\":\\\"options\\\",\\\"arrDifference\\\":\\\"options\\\",\\\"isChatExist\\\":\\\"options\\\",\\\"redirectToChat\\\":\\\"options\\\",\\\"createChat\\\":\\\"options\\\",\\\"checkChat\\\":\\\"options\\\"}\"\nimport script from \"./ContactView.vue?vue&type=script&lang=js\"\nexport * from \"./ContactView.vue?vue&type=script&lang=js\"\n\nimport \"./ContactView.vue?vue&type=style&index=0&id=373a4f1d&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-373a4f1d\"\n\nexport default script"],"sourceRoot":""}