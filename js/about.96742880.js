(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"18ab":function(t,e,s){},"56cf":function(t,e,s){"use strict";s("18ab")},c98b:function(t,e,s){"use strict";s.r(e);s("7db0"),s("b0c0"),s("ac1f"),s("1276");var n=s("7a23"),a=Object(n["H"])("data-v-12457b96");Object(n["s"])("data-v-12457b96");var c={class:"container"},i={key:0,class:"chats mainList"},r={class:"userIcon"},o={class:"chats__text"},u={class:"chats__username"},h={key:0,class:"chats__messageText"},b={class:"chats__time"},d={key:1,class:"chats__noChats"};Object(n["q"])();var g=a((function(t,e,s,a,g,f){var O=Object(n["w"])("router-link");return Object(n["p"])(),Object(n["d"])("div",c,[t.chats.length?(Object(n["p"])(),Object(n["d"])("div",i,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(t.chats,(function(e){return Object(n["p"])(),Object(n["d"])("div",{key:e.name,class:["chats__item mainList__elem",{"chats__item--active":f.getNotificationsLength(e)}]},[Object(n["g"])(O,{to:{path:"/"+e.users.find((function(e){return e!=t.authorizedUser}))+"/chat"}},null,8,["to"]),Object(n["g"])("div",r,[Object(n["g"])("img",{src:g.BACKEND_DOMAIN+f.userObj(e).photo},null,8,["src"])]),Object(n["g"])("div",o,[Object(n["g"])("div",u,Object(n["y"])(f.userObj(e).name),1),e.messages.length?(Object(n["p"])(),Object(n["d"])("div",h,Object(n["y"])(f.getLastMessage(e)),1)):Object(n["e"])("",!0)]),Object(n["g"])("div",b,Object(n["y"])(f.getLastTime(e).split(",")[3]),1),Object(n["g"])("span",{class:["newMessages  newMessages--grey chats__newMessagesCount",{"newMessages--active":f.getNotificationsLength(e)}]},Object(n["y"])(f.getNotificationsLength(e)),3)],2)})),128))])):(Object(n["p"])(),Object(n["d"])("div",d,"No chats found"))])})),f=(s("4de4"),s("5530")),O=s("5502"),j=s("8575"),v={name:"Chats",data:function(){return{BACKEND_DOMAIN:j["a"]}},computed:Object(f["a"])(Object(f["a"])({},Object(O["c"])(["contacts","chats","authorizedUser"])),{},{authorizedUserObj:function(){var t=this;if(0!=this.contacts.length){var e=this.contacts.find((function(e){return e.name==t.authorizedUser}));return e}return{notifications:[]}}}),watch:{authorizedUser:function(t){t||this.$router.push("/")},chats:function(){this.sortChatsByActivity()}},methods:{userObj:function(t){var e=this,s=t.users.find((function(t){return t!=e.authorizedUser})),n=this.contacts.find((function(t){return t.name==s}));return n},sortChatsByActivity:function(){var t=this;this.chats.sort((function(e,s){var n=t.getLastTime(e),a=t.getLastTime(s),c=new Date(n),i=new Date(a);return c>i?-1:c==i?0:c<i?1:void 0}))},getLastTime:function(t){if(t.messages.length){var e=t.messages[t.messages.length-1].timeOfSend;return e}var s=t.timeOfCreate;return s},getLastMessage:function(t){var e=t.messages[t.messages.length-1].text;return e.length>30&&(e=e.substr(0,30)+" . . ."),e},getNotificationsLength:function(t){var e=this;if(this.authorizedUserObj){var s=this.authorizedUserObj.notifications.filter((function(s){return s.messageFrom==t.users.find((function(t){return t!=e.authorizedUser}))})).length;return s}return!1}},mounted:function(){this.authorizedUser?this.sortChatsByActivity():this.$router.push("/404")}};s("56cf");v.render=g,v.__scopeId="data-v-12457b96";e["default"]=v}}]);
//# sourceMappingURL=about.96742880.js.map