(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chats"],{"07aa":function(t,e,s){},b176:function(t,e,s){"use strict";s("07aa")},c98b:function(t,e,s){"use strict";s.r(e);s("7db0"),s("b0c0"),s("ac1f"),s("1276");var n=s("7a23"),a=Object(n["H"])("data-v-33d60c48");Object(n["s"])("data-v-33d60c48");var c={class:"container"},i={key:0,class:"chats mainList"},r={class:"userIcon"},o={class:"chats__text"},u={class:"chats__username"},h={key:0,class:"chats__messageText"},d={class:"chats__time"},b={key:1,class:"chats__noChats"};Object(n["q"])();var f=a((function(t,e,s,a,f,g){var O=Object(n["w"])("router-link"),j=Object(n["w"])("MessageNotification");return Object(n["p"])(),Object(n["d"])("div",c,[t.chats.length?(Object(n["p"])(),Object(n["d"])("div",i,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(t.chats,(function(e){return Object(n["p"])(),Object(n["d"])("div",{key:e.name,class:["chats__item mainList__elem",{"chats__item--active":g.getNotificationsLength(e)}]},[Object(n["g"])(O,{to:{path:"/"+e.users.find((function(e){return e!=t.authorizedUser}))+"/chat"}},null,8,["to"]),Object(n["g"])("div",r,[Object(n["g"])("img",{src:f.BACKEND_DOMAIN+g.userObj(e).photo},null,8,["src"])]),Object(n["g"])("div",o,[Object(n["g"])("div",u,Object(n["y"])(g.userObj(e).name),1),e.messages.length?(Object(n["p"])(),Object(n["d"])("div",h,Object(n["y"])(g.getLastMessage(e)),1)):Object(n["e"])("",!0)]),Object(n["g"])("div",d,Object(n["y"])(g.getLastTime(e).split(",")[3]),1),Object(n["g"])(j,{notificationCount:g.getNotificationsLength(e),color:"grey",class:"chats__newMessagesCount"},null,8,["notificationCount"])],2)})),128))])):(Object(n["p"])(),Object(n["d"])("div",b,"No chats found"))])})),g=(s("4de4"),s("5530")),O=s("5502"),j=s("8575"),l=s("b779"),m={name:"Chats",data:function(){return{BACKEND_DOMAIN:j["a"]}},components:{MessageNotification:l["a"]},computed:Object(g["a"])(Object(g["a"])({},Object(O["c"])(["contacts","chats","authorizedUser"])),{},{authorizedUserObj:function(){var t=this;if(0!=this.contacts.length){var e=this.contacts.find((function(e){return e.name==t.authorizedUser}));return e}return{notifications:[]}}}),watch:{authorizedUser:function(t){t||this.$router.push("/")},chats:function(){this.sortChatsByActivity()}},methods:{userObj:function(t){var e=this,s=t.users.find((function(t){return t!=e.authorizedUser})),n=this.contacts.find((function(t){return t.name==s}));return n},sortChatsByActivity:function(){var t=this;this.chats.sort((function(e,s){var n=t.getLastTime(e),a=t.getLastTime(s),c=new Date(n),i=new Date(a);return c>i?-1:c==i?0:c<i?1:void 0}))},getLastTime:function(t){if(t.messages.length){var e=t.messages[t.messages.length-1].timeOfSend;return e}var s=t.timeOfCreate;return s},getLastMessage:function(t){var e=t.messages[t.messages.length-1].text;return e.length>30&&(e=e.substr(0,30)+" . . ."),e},getNotificationsLength:function(t){var e=this;if(this.authorizedUserObj){var s=this.authorizedUserObj.notifications.filter((function(s){return s.messageFrom==t.users.find((function(t){return t!=e.authorizedUser}))})).length;return s}return!1}},mounted:function(){this.authorizedUser?this.sortChatsByActivity():this.$router.push("/404")}};s("b176");m.render=f,m.__scopeId="data-v-33d60c48";e["default"]=m}}]);
//# sourceMappingURL=chats.049dbbd3.js.map